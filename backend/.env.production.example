NODE_ENV=production
FRONTEND_URL=https://www.khadamat.ma
BACKEND_BASE_URL=https://api.khadamat.ma

# Auth & cookies
JWT_SECRET=                     # OBLIGATOIRE (32+ chars)
REFRESH_TOKEN_COOKIE_DOMAIN=.khadamat.ma
COOKIE_SAMESITE=strict
COOKIE_SECURE=true

# Admin sécurité
ADMIN_IP_ALLOWLIST=             # CSV d’IPs publiques (OBLIGATOIRE en prod)
MFA_ENFORCE=admin               # admin | all

# Stripe / KYC
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_IDENTITY_WEBHOOK_SECRET=

# Emails / SMS (pas de mocks en prod)
SMTP_HOST=                      # si vide -> FAIL GO-LIVE
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMS_PROVIDER=                   # twilio/vonage/...
SMS_API_KEY=
QUIET_HOURS_START=22:00
QUIET_HOURS_END=08:00

# Base de données / cache
DATABASE_URL=                   # Postgres recommandé en prod
REDIS_URL=

# Antivirus uploads
UPLOAD_ANTIVIRUS=true
CLAMAV_HOST=clamav
CLAMAV_PORT=3310

# Backups / runbook
BACKUP_ENABLE=true
BACKUP_DRIVER=pg
BACKUP_OUTPUT_DIR=/var/backups/khadamat
BACKUP_RETENTION_DAYS=14

# GO-LIVE thresholds
GO_LIVE_MAX_DLQ_WEBHOOKS=5
GO_LIVE_MAX_DLQ_SMS=5
GO_LIVE_MAX_HEALTH_LATENCY_MS=800
GO_LIVE_REQUIRE_ALERTS_RULES=true

# Offline interdit en prod
OFFLINE_MODE=false
FORCE_ONLINE=true
PRODUCTION_OFFLINE_ALLOWED=false
DEMO_ENABLE=false
