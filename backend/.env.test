STAGE=test
NODE_ENV=test
PORT=0
# DB de test SQLite locale (pas de serveur requis)
DATABASE_URL="file:./.tmp/test.sqlite"
FRONTEND_URL=http://localhost:5173
UPLOAD_DRIVER=auto   # auto | multer | express-fileupload
JWT_SECRET="test_secret_32_chars_minimum____________"
JWT_REFRESH_SECRET="test_refresh_secret_32_chars_minimum"

# KYC configuration for tests
KYC_PROVIDER=stripe
KYC_REQUIRED_FOR=NONE
KYC_RETENTION_DAYS=30
KYC_HASH_PEPPER=test_pepper
KYC_STORE_RAW=false
KYC_ENC_KEYRING_JSON={"k1":"0000000000000000000000000000000000000000000000000000000000000000"}
KYC_ENC_ACTIVE_KEY_ID=k1
KYC_ENC_ROTATE_AFTER_DAYS=180
KYC_RAW_RETENTION_DAYS=365
KYC_EXPORT_IP_ALLOWLIST=
KYC_EXPORT_RATE_LIMIT=5:15m
ADMIN_TOTP_REQUIRED=false
DEMO_ACCOUNTS_ENABLED=false
SEARCH_RADIUS_KM=30
SEARCH_RANKING=popularity
PII_RETENTION_DAYS=365
PII_EXPORT_MAX_MB=10
PII_EXPORT_FORMAT=json
PII_EXPORT_RATE_PER_DAY=3

# Forcer un run test online mais tolérer le fallback si Prisma indispo
FORCE_ONLINE=false
OFFLINE_MODE=false
OFFLINE_SKIP_TESTS=false
PRODUCTION_OFFLINE_ALLOWED=false
TEST_PRISMA_TIMEOUT_MS=180000  # marge pour réseaux lents (3 min)

# Secrets tests (exemples)
JWT_ACCESS_SECRET=access_test_secret
JWT_REFRESH_SECRET=refresh_test_secret
JWT_RESET_SECRET=reset_test_secret
